(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[132],{72431:function(){},1480:function(e,r,n){Promise.resolve().then(n.bind(n,51673)),Promise.resolve().then(n.bind(n,60232)),Promise.resolve().then(n.bind(n,43394)),Promise.resolve().then(n.bind(n,50029))},43394:function(e,r,n){"use strict";n.r(r);var s=n(57437),t=n(2265),i=n(43560),a=n(96507),o=n(80682),l=n(52653),c=n(49050),d=n(46446),u=n(13391),x=n(29222);r.default=()=>{let[e,r]=(0,t.useState)(!1),[n,h]=(0,t.useState)({title:"",description:"",price:0,imageURL:"",subRows:[]}),[g,m]=(0,t.useState)([]),p=()=>{r(!0)};(0,t.useEffect)(()=>{let e=async()=>{try{let e=await x.Z.get("/api/cars");m(e.data)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es des voitures :",e)}};e()},[]);let j=(0,t.useMemo)(()=>[{accessorKey:"id",header:"ID",enableColumnOrdering:!1,enableEditing:!0,enableSorting:!0,size:80},{accessorKey:"title",header:"Titre",size:140},{accessorKey:"description",header:"Description",size:140},{accessorKey:"price",header:"Prix",size:80},{accessorKey:"imageURL",header:"Image",size:80},{accessorKey:"subRows",header:"",size:40}],[]);return(0,s.jsx)("div",{children:(0,s.jsx)(i.ZP,{getSubRows:(e,r)=>e.subRows||void 0,displayColumnDefOptions:{"mrt-row-actions":{muiTableHeadCellProps:{align:"center"},size:120}},columns:j,data:g,editingMode:"modal",enableColumnOrdering:!0,enableEditing:!0,onEditingRowSave:()=>{},onEditingRowCancel:()=>{},renderRowActions:e=>{let{row:r,table:n}=e;return(0,s.jsxs)(a.Z,{sx:{display:"flex",gap:"1rem"},children:[(0,s.jsx)(o.Z,{arrow:!0,placement:"left",title:"Edit",children:(0,s.jsx)(l.Z,{onClick:()=>n.setEditingRow(r),children:(0,s.jsx)(u.Z,{})})}),(0,s.jsx)(o.Z,{arrow:!0,placement:"right",title:"Delete",children:(0,s.jsx)(l.Z,{color:"error",onClick:()=>{},children:(0,s.jsx)(d.Z,{})})})]})},renderTopToolbarCustomActions:()=>(0,s.jsx)(c.Z,{color:"secondary",onClick:p,variant:"contained",children:"Cr\xe9er une annonce de voiture"}),enableExpanding:!0})})}},50029:function(e,r,n){"use strict";n.r(r);var s=n(57437),t=n(82749);let i=()=>(0,s.jsx)("button",{className:"btn",onClick:()=>(0,t.signOut)({callbackUrl:"/"}),children:"Sign out"});i.displayName="SignOut",r.default=i},60232:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return x}});var s=n(57437),t=n(2265),i=n(43560),a=n(49050),o=n(96507),l=n(52653),c=n(14565),d=n(81475),u=n(29222);function x(){let[e,r]=(0,t.useState)([]),[n,x]=(0,t.useState)([]),[h,g]=(0,t.useState)({});(0,t.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=await u.Z.get("/api/testimonials");r(e.data)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des t\xe9moignages:",e)}},p=(e,r)=>{g({...h,[e.id]:{...e,isValidated:r}})},j=async()=>{console.log("Changements en attente avant la mise \xe0 jour:",h);let e=Object.values(h).map(e=>{let{id:r,isValidated:n,status:s}=e;return u.Z.put("/api/testimonials/".concat(r),{id:r,isValidated:n,status:s})});try{await Promise.all(e),console.log("Tous les changements ont \xe9t\xe9 appliqu\xe9s avec succ\xe8s."),x([]),m(),g({}),window.location.reload()}catch(e){console.error("Erreur lors de la mise \xe0 jour des t\xe9moignages:",e)}console.log("Changements en attente apr\xe8s la mise \xe0 jour:",h)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Liste des T\xe9moignages"}),(0,s.jsx)(a.Z,{className:"btn",onClick:j,children:"Appliquer les changements"}),(0,s.jsx)(i.P2,{columns:[{accessorKey:"id",header:"ID",size:80},{accessorKey:"name",header:"Nom",size:140},{accessorKey:"date",header:"Date",Cell:e=>{let{cell:r}=e;return(0,s.jsx)("span",{children:new Date(r.getValue()).toLocaleDateString()})}},{accessorKey:"rating",header:"Note",size:80},{accessorKey:"message",header:"Commentaire"},{accessorKey:"isValidated",header:"Valid\xe9",Cell:e=>{let{cell:r}=e;return(0,s.jsx)("span",{children:r.getValue()?"Oui":"Non"})}},{accessorKey:"status",header:"Statut",Cell:e=>{let{cell:r}=e;return(0,s.jsx)("span",{children:r.row.original.isValidated?"En ligne":"Hors ligne"})}}],data:e,positionActionsColumn:"last",getRowId:e=>e.id,enableRowActions:!0,renderRowActions:e=>{var r,n;let{row:t}=e;return(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(l.Z,{onClick:()=>p(t,!0),style:{backgroundColor:(null===(r=h[t.id])||void 0===r?void 0:r.isValidated)?"lightgrey":"transparent"},children:(0,s.jsx)(c.Z,{})}),(0,s.jsx)(l.Z,{onClick:()=>p(t,!1),style:{backgroundColor:(null===(n=h[t.id])||void 0===n?void 0:n.isValidated)===!1?"lightgrey":"transparent"},children:(0,s.jsx)(d.Z,{})})]})}})]})}n(6543)},51673:function(e,r,n){"use strict";n.r(r);var s=n(57437),t=n(2265),i=n(43560),a=n(49050),o=n(89394),l=n(91797),c=n(26337),d=n(42498),u=n(99960),x=n(42834),h=n(96507),g=n(80682),m=n(52653),p=n(46446),j=n(13391),y=n(29222);r.default=()=>{let[e,r]=(0,t.useState)(!1),[n,C]=(0,t.useState)({title:"",description:"",price:"",imageURL:""}),[b,Z]=(0,t.useState)([]),v=()=>{r(!0)},w=()=>{r(!1)},f=e=>{let{name:r,value:s}=e.target;C({...n,[r]:s})},E=async()=>{try{let e=await y.Z.post("/api/cars",n);console.log("Annonce de voiture cr\xe9\xe9e avec succ\xe8s :",e.data),w()}catch(e){console.error("Erreur lors de la cr\xe9ation de l'annonce de voiture :",e)}},K=async()=>{try{let e=await y.Z.get("/api/cars");Z(e.data)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es des voitures :",e)}};(0,t.useEffect)(()=>{K()},[]);let k=(0,t.useMemo)(()=>[{accessorKey:"id",header:"ID",enableColumnOrdering:!1,enableEditing:!0,enableSorting:!0,size:80},{accessorKey:"title",header:"Titre",size:140},{accessorKey:"description",header:"Description",size:140},{accessorKey:"price",header:"Prix",size:80},{accessorKey:"imageURL",header:"Image",size:80}],[]);return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Liste des Voitures"}),(0,s.jsx)(a.Z,{className:"btn",onClick:v,children:"Cr\xe9er une annonce de voiture"}),(0,s.jsxs)(o.Z,{open:e,onClose:w,children:[(0,s.jsx)(l.Z,{children:"Cr\xe9er une annonce de voiture"}),(0,s.jsx)(c.Z,{children:(0,s.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,s.jsx)(d.Z,{sx:{width:"100%",minWidth:{xs:"300px",sm:"360px",md:"400px"},gap:"1.5rem"},children:k.map(e=>(0,s.jsx)(u.Z,{label:e.header,name:e.accessorKey,value:n[e.accessorKey],onChange:f,fullWidth:!0},e.accessorKey))})})}),(0,s.jsxs)(x.Z,{sx:{p:"1.25rem"},children:[(0,s.jsx)(a.Z,{className:"btn",onClick:w,children:"Annuler"}),(0,s.jsx)(a.Z,{className:"btn",color:"secondary",onClick:E,variant:"contained",children:"Cr\xe9er"})]})]}),(0,s.jsx)(i.P2,{displayColumnDefOptions:{"mrt-row-actions":{muiTableHeadCellProps:{align:"center"},size:120}},columns:k,data:b,editingMode:"modal",enableColumnOrdering:!0,enableEditing:!0,onEditingRowSave:()=>{},onEditingRowCancel:()=>{},renderRowActions:e=>{let{row:r,table:n}=e;return(0,s.jsxs)(h.Z,{sx:{display:"flex",gap:"1rem"},children:[(0,s.jsx)(g.Z,{arrow:!0,placement:"left",title:"Edit",children:(0,s.jsx)(m.Z,{onClick:()=>n.setEditingRow(r),children:(0,s.jsx)(j.Z,{})})}),(0,s.jsx)(g.Z,{arrow:!0,placement:"right",title:"Delete",children:(0,s.jsx)(m.Z,{color:"error",onClick:()=>{},children:(0,s.jsx)(p.Z,{})})})]})},renderTopToolbarCustomActions:()=>(0,s.jsx)(a.Z,{color:"secondary",onClick:v,variant:"contained",children:"Cr\xe9er une annonce de voiture"})})]})}}},function(e){e.O(0,[683,750,690,749,984,723,971,596,744],function(){return e(e.s=1480)}),_N_E=e.O()}]);