(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[132],{72431:function(){},46446:function(e,t,s){"use strict";var r=s(26314);t.Z=void 0;var a=r(s(80984)),n=s(57437),i=(0,a.default)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=i},14398:function(e,t,s){Promise.resolve().then(s.bind(s,60232)),Promise.resolve().then(s.bind(s,51673)),Promise.resolve().then(s.bind(s,43394)),Promise.resolve().then(s.bind(s,50029))},43394:function(e,t,s){"use strict";s.r(t);var r=s(57437),a=s(2265),n=s(43560),i=s(96507),o=s(80682),l=s(52653),c=s(49050),d=s(46446),u=s(13391),h=s(29222);t.default=()=>{let[e,t]=(0,a.useState)(!1),[s,m]=(0,a.useState)({title:"",description:"",price:0,imageURL:"",subRows:[]}),[g,x]=(0,a.useState)([]),p=()=>{t(!0)};(0,a.useEffect)(()=>{let e=async()=>{try{let e=await h.Z.get("/api/cars");x(e.data)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es des voitures :",e)}};e()},[]);let y=(0,a.useMemo)(()=>[{accessorKey:"id",header:"ID",enableColumnOrdering:!1,enableEditing:!0,enableSorting:!0,size:80},{accessorKey:"title",header:"Titre",size:140},{accessorKey:"description",header:"Description",size:140},{accessorKey:"price",header:"Prix",size:80},{accessorKey:"imageURL",header:"Image",size:80},{accessorKey:"subRows",header:"",size:40}],[]);return(0,r.jsx)("div",{children:(0,r.jsx)(n.ZP,{getSubRows:(e,t)=>e.subRows||void 0,displayColumnDefOptions:{"mrt-row-actions":{muiTableHeadCellProps:{align:"center"},size:120}},columns:y,data:g,editingMode:"modal",enableColumnOrdering:!0,enableEditing:!0,onEditingRowSave:()=>{},onEditingRowCancel:()=>{},renderRowActions:e=>{let{row:t,table:s}=e;return(0,r.jsxs)(i.Z,{sx:{display:"flex",gap:"1rem"},children:[(0,r.jsx)(o.Z,{arrow:!0,placement:"left",title:"Edit",children:(0,r.jsx)(l.Z,{onClick:()=>s.setEditingRow(t),children:(0,r.jsx)(u.Z,{})})}),(0,r.jsx)(o.Z,{arrow:!0,placement:"right",title:"Delete",children:(0,r.jsx)(l.Z,{color:"error",onClick:()=>{},children:(0,r.jsx)(d.Z,{})})})]})},renderTopToolbarCustomActions:()=>(0,r.jsx)(c.Z,{color:"secondary",onClick:p,variant:"contained",children:"Cr\xe9er une annonce de voiture"}),enableExpanding:!0})})}},50029:function(e,t,s){"use strict";s.r(t);var r=s(57437),a=s(82749);let n=()=>(0,r.jsx)("button",{className:"btn",onClick:()=>(0,a.signOut)({callbackUrl:"/"}),children:"Sign out"});n.displayName="SignOut",t.default=n},60232:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(57437),a=s(2265),n=s(43560),i=s(96507),o=s(52653),l=s(49050),c=s(14565),d=s(81475),u=s(29222);function h(){let[e,t]=(0,a.useState)([]),[s,h]=(0,a.useState)([]),[m,g]=(0,a.useState)({});(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await u.Z.get("/api/testimonials");t(e.data)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des t\xe9moignages:",e)}},p=(e,t)=>{g({...m,[e.id]:{...e,isValidated:t}})},y=async()=>{console.log("Changements en attente avant la mise \xe0 jour:",m);let e=Object.values(m).map(e=>{let{id:t,isValidated:s,status:r}=e;return u.Z.put("/api/testimonials/".concat(t),{id:t,isValidated:s,status:r})});try{await Promise.all(e),console.log("Tous les changements ont \xe9t\xe9 appliqu\xe9s avec succ\xe8s."),h([]),x(),g({}),window.location.reload()}catch(e){console.error("Erreur lors de la mise \xe0 jour des t\xe9moignages:",e)}console.log("Changements en attente apr\xe8s la mise \xe0 jour:",m)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(n.P2,{columns:[{accessorKey:"id",header:"ID",size:80},{accessorKey:"name",header:"Nom",size:140},{accessorKey:"date",header:"Date",Cell:e=>{let{cell:t}=e;return(0,r.jsx)("span",{children:new Date(t.getValue()).toLocaleDateString()})}},{accessorKey:"rating",header:"Note",size:80},{accessorKey:"message",header:"Commentaire"},{accessorKey:"isValidated",header:"Valid\xe9",Cell:e=>{let{cell:t}=e;return(0,r.jsx)("span",{children:t.getValue()?"Oui":"Non"})}},{accessorKey:"status",header:"Statut",Cell:e=>{let{cell:t}=e;return(0,r.jsx)("span",{children:t.row.original.isValidated?"En ligne":"Hors ligne"})}}],data:e,positionActionsColumn:"last",getRowId:e=>e.id,enableRowActions:!0,renderRowActions:e=>{var t,s;let{row:a}=e;return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(o.Z,{onClick:()=>p(a,!0),style:{backgroundColor:(null===(t=m[a.id])||void 0===t?void 0:t.isValidated)?"lightgrey":"transparent"},children:(0,r.jsx)(c.Z,{})}),(0,r.jsx)(o.Z,{onClick:()=>p(a,!1),style:{backgroundColor:(null===(s=m[a.id])||void 0===s?void 0:s.isValidated)===!1?"lightgrey":"transparent"},children:(0,r.jsx)(d.Z,{})})]})}}),(0,r.jsx)(l.Z,{className:"btn btn-primary m-4",onClick:y,children:"Appliquer les changements"})]})}s(6543)},51673:function(e,t,s){"use strict";s.r(t);var r=s(57437),a=s(2265),n=s(43560),i=s(29222);t.default=()=>{let[e,t]=(0,a.useState)(!1),[s,o]=(0,a.useState)({title:"",description:"",price:"",imageURL:""}),[l,c]=(0,a.useState)([]),d=async()=>{try{let e=await i.Z.get("/api/auth/profile");c(e.data)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es des voitures :",e)}};(0,a.useEffect)(()=>{d()},[]);let u=(0,a.useMemo)(()=>[{accessorKey:"email",header:"Email",size:140},{accessorKey:"lastname",header:"Nom",size:140},{accessorKey:"firstname",header:"Pr\xe9nom",size:80},{accessorKey:"role",header:"Role",size:80}],[]);return(0,r.jsx)("div",{children:(0,r.jsx)(n.P2,{displayColumnDefOptions:{"mrt-row-actions":{muiTableHeadCellProps:{align:"center"},size:120}},columns:u,data:l,editingMode:"modal",enableColumnOrdering:!0})})}}},function(e){e.O(0,[683,750,690,341,646,749,167,971,596,744],function(){return e(e.s=14398)}),_N_E=e.O()}]);