"use strict";(()=>{var e={};e.id=4305,e.ids=[4305],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92629:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>S,requestAsyncStorage:()=>f,routeModule:()=>c,serverHooks:()=>w,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>h});var i={};r.r(i),r.d(i,{DELETE:()=>p,GET:()=>o,PUT:()=>d}),r(95655);var a=r(83323),s=r(54647),n=r(53524),u=r(66886);let l=new n.PrismaClient,o=async e=>{let t=e.url.split("admin/")[1];try{let e=await l.users.findFirst({where:{id:parseInt(t)}});if(console.log("id",t),console.log("utilisateur",e),!e)return new u.Z(JSON.stringify({message:"Utilisateur non trouv\xe9"}),{status:404});return new u.Z(JSON.stringify(e),{status:200})}catch(e){return new u.Z(JSON.stringify({message:"Error fetching User"}),{status:500})}finally{await l.$disconnect()}},d=async e=>{let t=e.url.split("admin/")[1],r=parseInt(t,10);try{let t=await e.json();if(isNaN(r))return new u.Z(JSON.stringify({message:"ID invalide fourni"}),{status:400});let i=await l.users.update({where:{id:r},data:{email:t.email,firstname:t.firstname,lastname:t.lastname,role:t.role}});return new u.Z(JSON.stringify(i),{status:200})}catch(e){return console.error("Erreur lors de la mise \xe0 jour de l'utilisateur:",e),new u.Z(JSON.stringify({message:"Erreur lors de la mise \xe0 jour de l'utilisateur"}),{status:500})}finally{await l.$disconnect()}},p=async e=>{try{let t=parseInt(e.url.split("admin/")[1]);return await l.users.delete({where:{id:t}}),new u.Z(JSON.stringify({message:"User deleted successfully"}),{status:200})}catch(e){return new u.Z(JSON.stringify({message:"Error deleting user"}),{status:500})}finally{await l.$disconnect()}},m=a.AppRouteRouteModule,c=new m({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/profile/admin/[id]/route",pathname:"/api/auth/profile/admin/[id]",filename:"route",bundlePath:"app/api/auth/profile/admin/[id]/route"},resolvedPagePath:"/Users/gabrielkhaldi/Desktop/Studi/Git/Studi/ECF/vparrot/app/api/auth/profile/admin/[id]/route.tsx",nextConfigOutput:"",userland:i}),{requestAsyncStorage:f,staticGenerationAsyncStorage:g,serverHooks:w,headerHooks:y,staticGenerationBailout:h}=c,S="/api/auth/profile/admin/[id]/route"}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[7882,3497,9727,6886],()=>r(92629));module.exports=i})();