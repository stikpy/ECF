"use strict";(()=>{var e={};e.id=5382,e.ids=[5382],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32508:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>f,originalPathname:()=>y,requestAsyncStorage:()=>p,routeModule:()=>g,serverHooks:()=>x,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>w});var r={};a.r(r),a.d(r,{GET:()=>l,POST:()=>d}),a(95655);var s=a(83323),i=a(54647),n=a(53524),o=a(66886);let u=new n.PrismaClient;async function l(e){try{let e=await u.testimonials.findMany();return new o.Z(JSON.stringify(e),{status:200})}catch(e){return new o.Z(JSON.stringify({message:"Error fetching users"}),{status:500})}}async function d(e){try{let t=await e.json();if(console.log("Donn\xe9es re\xe7ues:",t),!t.name||!t.rating||!t.message)return new o.Z(JSON.stringify({message:"Champs manquants ou invalides"}),{status:400});let{name:a,date:r,rating:s,message:i}=t,n=new Date(r),l=await u.testimonials.create({data:{name:a,date:"Invalid Date"===n.toString()?new Date:n,rating:Number(s),message:i,isValidated:!1,status:"Hors ligne"}});return new o.Z(JSON.stringify(l),{status:201})}catch(e){return console.error("Erreur lors de la cr\xe9ation du t\xe9moignage:",e),new o.Z(JSON.stringify({message:"Erreur lors de la cr\xe9ation du t\xe9moignage"}),{status:500})}}let m=s.AppRouteRouteModule,g=new m({definition:{kind:i.x.APP_ROUTE,page:"/api/testimonials/route",pathname:"/api/testimonials",filename:"route",bundlePath:"app/api/testimonials/route"},resolvedPagePath:"/Users/gabrielkhaldi/Desktop/Studi/Git/Studi/ECF/vparrot/app/api/testimonials/route.tsx",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:c,serverHooks:x,headerHooks:f,staticGenerationBailout:w}=g,y="/api/testimonials/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[7882,3497,9727,6886],()=>a(32508));module.exports=r})();