"use strict";(()=>{var e={};e.id=7499,e.ids=[7499],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},23083:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>O,originalPathname:()=>S,requestAsyncStorage:()=>y,routeModule:()=>w,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>P});var s={};r.r(s),r.d(s,{DELETE:()=>p,GET:()=>l,POST:()=>c,PUT:()=>d}),r(95655);var a=r(83323),i=r(54647),n=r(66886),o=r(53524);let u=new o.PrismaClient,l=async e=>{let t=e.url.split("cars/")[1];try{let e=await u.carPosts.findFirst({where:{id:parseInt(t)}});if(!e)return new n.Z(JSON.stringify({message:"Voiture non trouv\xe9e"}),{status:404});return console.log("car",e),new n.Z(JSON.stringify(e),{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}catch(e){return new n.Z(JSON.stringify({message:"Erreur lors de la r\xe9cup\xe9ration de la voiture"}),{status:500})}finally{await u.$disconnect()}},c=async e=>{try{let t=await e.json(),{title:r,description:s,price:a,imageUrl:i}=t,o=await u.carPosts.create({data:{title:r,description:s,price:a,imageUrl:i,users:{}},include:{users:!0}});return new n.Z(JSON.stringify(o),{status:200})}catch(e){return new n.Z(JSON.stringify({message:"Erreur lors de la cr\xe9ation de la voiture"}),{status:500})}finally{await u.$disconnect()}},d=async e=>{try{let t=await e.json();if("number"!=typeof t.id)return new n.Z(JSON.stringify({message:"ID invalide fourni"}),{status:400});let r={where:{id:t.id},data:{title:t.title,description:t.description,price:t.price,imageUrl:t.imageUrl,slug:t.slug},include:{users:!0}},s=await u.carPosts.update(r);return new n.Z(JSON.stringify(s),{status:200})}catch(e){return new n.Z(JSON.stringify({message:"Erreur lors de la mise \xe0 jour de la voiture"}),{status:500})}finally{await u.$disconnect()}},p=async e=>{try{let t=parseInt(e.url.split("carsPosts/")[1]);return await u.carPosts.delete({where:{id:t}}),new n.Z(JSON.stringify({message:"Voiture supprim\xe9e avec succ\xe8s"}),{status:200})}catch(e){return new n.Z(JSON.stringify({message:"Erreur lors de la suppression de la voiture"}),{status:500})}finally{await u.$disconnect()}},g=a.AppRouteRouteModule,w=new g({definition:{kind:i.x.APP_ROUTE,page:"/api/cars/[id]/route",pathname:"/api/cars/[id]",filename:"route",bundlePath:"app/api/cars/[id]/route"},resolvedPagePath:"/Users/gabrielkhaldi/Desktop/Studi/Git/Studi/ECF/vparrot/app/api/cars/[id]/route.tsx",nextConfigOutput:"",userland:s}),{requestAsyncStorage:y,staticGenerationAsyncStorage:m,serverHooks:f,headerHooks:O,staticGenerationBailout:P}=w,S="/api/cars/[id]/route"}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7882,3497,9727,6886],()=>r(23083));module.exports=s})();