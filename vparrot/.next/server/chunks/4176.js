"use strict";exports.id=4176,exports.ids=[4176],exports.modules={84176:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var t=a(60080),r=a(9885),n=a(6242),l=a(43872),o=a(48060),i=a.n(o),c=a(16614),d=a.n(c),u=a(8349),g=a(90802),x=a(93258);function m(){let[e,s]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[c,m]=(0,r.useState)({});(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await x.Z.get("/api/testimonials");s(e.data)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des t\xe9moignages:",e)}},p=(e,s)=>{m({...c,[e.id]:{...e,isValidated:s}})},y=async()=>{console.log("Changements en attente avant la mise \xe0 jour:",c);let e=Object.values(c).map(e=>{let{id:s,isValidated:a,status:t}=e;return x.Z.put(`/api/testimonials/${s}`,{id:s,isValidated:a,status:t})});try{await Promise.all(e),console.log("Tous les changements ont \xe9t\xe9 appliqu\xe9s avec succ\xe8s."),o([]),h(),m({}),window.location.reload()}catch(e){console.error("Erreur lors de la mise \xe0 jour des t\xe9moignages:",e)}console.log("Changements en attente apr\xe8s la mise \xe0 jour:",c)};return(0,t.jsxs)("div",{children:[t.jsx(n.P2,{columns:[{accessorKey:"id",header:"ID",size:80},{accessorKey:"name",header:"Nom",size:140},{accessorKey:"date",header:"Date",Cell:({cell:e})=>t.jsx("span",{children:new Date(e.getValue()).toLocaleDateString()})},{accessorKey:"rating",header:"Note",size:80},{accessorKey:"message",header:"Commentaire"},{accessorKey:"isValidated",header:"Valid\xe9",Cell:({cell:e})=>t.jsx("span",{children:e.getValue()?"Oui":"Non"})},{accessorKey:"status",header:"Statut",Cell:({cell:e})=>t.jsx("span",{children:e.row.original.isValidated?"En ligne":"Hors ligne"})}],data:e,positionActionsColumn:"last",getRowId:e=>e.id,enableRowActions:!0,renderRowActions:({row:e})=>(0,t.jsxs)(l.default,{children:[t.jsx(i(),{onClick:()=>p(e,!0),style:{backgroundColor:c[e.id]?.isValidated?"lightgrey":"transparent"},children:t.jsx(u.Z,{})}),t.jsx(i(),{onClick:()=>p(e,!1),style:{backgroundColor:c[e.id]?.isValidated===!1?"lightgrey":"transparent"},children:t.jsx(g.Z,{})})]})}),t.jsx(d(),{className:"btn btn-primary m-4",onClick:y,children:"Appliquer les changements"})]})}a(9598)}};