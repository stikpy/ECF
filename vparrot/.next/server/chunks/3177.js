"use strict";exports.id=3177,exports.ids=[3177],exports.modules={33177:(e,s,l)=>{l.r(s),l.d(s,{GET:()=>p,POST:()=>p,authOptions:()=>c});var r=l(3471),o=l.n(r),a=l(45955),i=l(53524),n=l(45952),t=l(67096),d=l.n(t);let m=new i.PrismaClient;n.ZP.object({email:n.ZP.string().email(),password:n.ZP.string().min(4)});let c={secret:process.env.NEXTAUTH_SECRET,session:{strategy:"jwt"},providers:[(0,a.Z)({name:"Email and Password",credentials:{email:{label:"Email",type:"email",placeholder:"hello@example.com"},password:{label:"Password",type:"password",placeholder:"********"}},async authorize(e){if(!e)return console.log("Les informations de connexion sont manquantes."),null;let s=await m.users.findUnique({where:{email:e.email}});if(!s)return console.log("Utilisateur non trouv\xe9."),null;let l=await d().compare(e.password,s?.password||"");return l?{id:String(s.id),name:s.firstname,email:s.email,role:s.role}:(console.log("Mot de passe incorrect."),null)}})],callbacks:{jwt:({token:e,user:s})=>(s&&(e.role=s.role),e),session:({session:e,token:s,user:l})=>(e?.user&&(e.user.role=s?.role),e)}},p=o()(c)}};